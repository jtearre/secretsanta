function createGiftItem(gift, index, isCurrentUser, username = currentUser) {
    const giftItem = document.createElement('div');
    giftItem.className = 'gift-item';

    // Get the display text and background color
    const { text, backgroundColor } = getGiftDisplay(gift.status, gift.checkedBy);

    giftItem.innerHTML = `
        <div style="flex: 1; display: flex; align-items: center;">
            <p style="margin: 0; margin-right: 10px; flex-grow: 1;">${gift.text}</p>
            <div 
                style="background-color: ${backgroundColor}; padding: 5px 10px; border-radius: 5px; cursor: pointer;" 
                onclick="toggleCheck('${username}', ${index})">
                ${text}
            </div>
        </div>
        ${isCurrentUser ? `<button style="margin-left: 10px; padding: 3px 8px; font-size: 0.7em;" onclick="deleteGift(${index})">X</button>` : ''}
    `;

    return giftItem;
}
