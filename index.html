<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secret Santa</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background-color: #f7f7f7;
        }
        h1 {
            color: #d62828;
        }
        input, button {
            padding: 10px;
            margin: 5px;
            font-size: 1em;
        }
    </style>
</head>
<body>

<h1>Secret Santa Picker</h1>
<p>Enter each participant's name and click "Add Name". When everyone is added, each person can enter their name and receive their Secret Santa assignment!</p>

<input type="text" id="nameInput" placeholder="Enter name">
<button onclick="addName()">Add Name</button>
<button onclick="finalizeList()">Finalize List</button>

<ul id="nameList"></ul>

<div style="margin-top: 20px;">
    <input type="text" id="participantNameInput" placeholder="Enter your name">
    <button onclick="getSecretSanta()">Give me my Secret Santa</button>
</div>

<div id="result" style="margin-top:20px;"></div>

<script>
    let names = [];
    let santaPairs = {};
    let isFinalized = false;

    function addName() {
        if (isFinalized) {
            alert("The list is finalized. No more names can be added.");
            return;
        }

        const nameInput = document.getElementById('nameInput');
        const name = nameInput.value.trim();
        if (name && !names.includes(name)) {
            names.push(name);
            displayNames();
        }
        nameInput.value = '';
    }

    function displayNames() {
        const nameList = document.getElementById('nameList');
        nameList.innerHTML = names.map(name => `<li>${name}</li>`).join('');
    }

    function finalizeList() {
        if (names.length < 2) {
            alert("Add at least 2 participants before finalizing.");
            return;
        }
        isFinalized = true;
        assignSecretSanta();
        alert("The list has been finalized. Each person can now retrieve their Secret Santa!");
    }

    function assignSecretSanta() {
        let availableRecipients = [...names];
        names.forEach(name => {
            let index;
            do {
                index = Math.floor(Math.random() * availableRecipients.length);
            } while (availableRecipients[index] === name);

            santaPairs[name] = availableRecipients[index];
            availableRecipients.splice(index, 1);
        });
    }

    function getSecretSanta() {
        if (!isFinalized) {
            alert("The list is not finalized yet.");
            return;
        }

        const participantName = document.getElementById('participantNameInput').value.trim();
        if (names.includes(participantName)) {
            const recipient = santaPairs[participantName];
            document.getElementById('result').innerHTML = `<p>Your Secret Santa recipient is: <strong>${recipient}</strong></p>`;
        } else {
            document.getElementById('result').innerHTML = `<p>Name not found. Make sure you entered your name exactly as it was added.</p>`;
        }
        document.getElementById('participantNameInput').value = '';
    }
</script>

</body>
</html>
